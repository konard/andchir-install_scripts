- bash скрипт должен быть адаптирован под Ubuntu 24.04.
- bash скрипт должен сам создавать пользователя installer_user и входить под ним.
- Скрипт должен устанавливать и настраивать всё необходимое, включая, например, веб-сервер, если это требуется.
- Имя домена или другие необходимые данные должны задаваться через аргументы при запуске скрипта.
- Скрипт должен создавать SSL сертификат для домена через certbot.
- Не должно быть никаких дополнительных вопросов и подтверждений.
- При необходимости клонируется git репозиторий, а если он уже есть в домашней директории, то нужно загрузить обновления (pull).
- Перед pull всегда делать `git checkout .`, чтобы отменить локальные изменения.
- Скрипт должен поддерживать идемпотентность.
- Все действия должны иметь проверку, например, если нужно создать базу данных, то нужно проверить существует ли она, если существует, пропустить. Скрипт может быть запущен несколько раз, при повторном запуске должен обновляться код, но не база данных и т.п.
- Если systemd service уже существует, нужно запустить restart для него.
- Если используется python и директория виртуального окружения уже существует, не нужно создавать новую, а нужно только обновить зависимости в этом виртуальном окружении.
- В конфигурации nginx всегда указывать, чтобы были созданы отдельные log файлы для домена.
- Если SSL сертификат уже создан, не нужно его пересоздавать и обновлять конфигурацию nginx.
- Все пароли, которые создает скрипт, должны быть безопасными. Нужно писать их в отчёте.
- Информация при установке должна быть красиво оформлена с использованием цветов для текста.
