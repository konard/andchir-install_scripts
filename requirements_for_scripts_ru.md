- Bash-скрипт должен быть адаптирован под Ubuntu 24.04.
- Bash-скрипт должен автоматически создавать пользователя installer_user и выполнять действия от его имени.
- Скрипт должен устанавливать и настраивать все необходимые компоненты, включая веб-сервер (если требуется).
- Имя домена или другие необходимые данные должны задаваться через аргументы при запуске скрипта.
- Скрипт должен создавать SSL-сертификат для домена через certbot.
- Не должно быть никаких дополнительных вопросов и подтверждений.
- При необходимости скрипт должен клонировать Git-репозиторий, а если он уже существует в домашней директории, выполнить обновление (pull).
- Перед выполнением pull необходимо всегда выполнять `git checkout .` для отмены локальных изменений.
- Скрипт должен поддерживать идемпотентность.
- Все действия должны включать проверку существования ресурсов. Например, при создании базы данных необходимо проверить, существует ли она, и если существует, пропустить этот шаг. Скрипт может быть запущен несколько раз: при повторном запуске должен обновляться код, но не база данных и другие уже созданные ресурсы.
- Если systemd-сервис уже существует, необходимо выполнить для него команду restart.
- Если используется Python и директория виртуального окружения уже существует, не следует создавать новую, достаточно обновить зависимости в существующем виртуальном окружении.
- При необходимости создания базы данных для конкретного ПО никогда не следует использовать root-пароль и root-пользователя. Необходимо создать нового пользователя с новым паролем и правами доступа только к одной базе данных.
- В конфигурации Nginx необходимо всегда указывать создание отдельных лог-файлов для домена.
- Если SSL-сертификат уже создан, не следует его пересоздавать и обновлять конфигурацию Nginx.
- Все пароли, которые создаёт скрипт, должны быть безопасными и записываться в отчёт.
- Информация при установке должна быть красиво оформлена с использованием цветов для текста.
